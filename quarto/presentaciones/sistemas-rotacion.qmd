---
title: "Sistemas de rotación y ribbon graphs"
author: "José Luis León"
format:
  revealjs:
    theme: [default, ../styles-slides.scss]
    slide-number: true
    show-slide-number: all
    transition: slide
    background-transition: fade
    incremental: false
    code-fold: false
    code-overflow: wrap
    html-math-method: mathjax
    preview-links: auto
    controls: true
    progress: true
    history: true
    center: true
    navigation-mode: linear
    width: 1920
    height: 1080
    margin: 0.1
---

## {background-color="#1e88e5"}

::: {style="font-size: 3em; font-weight: 700; color: white;"}
Sistemas de rotación y ribbon graphs
:::

::: {style="font-size: 1.5em; color: #e3f2fd; margin-top: 2em;"}
José Luis León
:::

---

## Objetivo de la charla {.smaller}

Queremos codificar encajes celulares de grafos en superficies orientables **sin dibujar la superficie**, usando sólo datos combinatorios.

::: {.incremental}
- **Entrada:** un grafo abstracto $G$.
- **Dato extra:** un **sistema de rotación** (orden cíclico local).
- **Salida:** una superficie orientable (con o sin frontera) donde $G$ queda encajado, más las **caras** y el **género**.
:::

::: {.fragment .callout-tip}
## Idea clave
"Localmente en vértices" $\Rightarrow$ "globalmente en la superficie"
:::

---

## Sistemas de rotación (semiaristas)

Consideremos un grafo $G$ (no necesariamente encajado en una superficie).
Insertamos un vértice en el interior de cada arista, dividiéndola en dos **semiaristas** (también llamadas *darts*, *half-edges* o *flags*).
Etiquetamos las semiaristas con números.

. . .

Un **sistema de rotación** sobre $G$ se da por un par de permutaciones $(\sigma,\rho)$ sobre el conjunto de semiaristas, donde:

::: {.incremental}
- $\sigma$ es producto de ciclos disjuntos, uno por cada vértice de $G$. Cada ciclo describe un **orden cíclico** de las semiaristas incidentes a ese vértice.
- $\rho$ es producto de **2-ciclos** (involución sin puntos fijos) y empareja las dos semiaristas que forman una arista.
:::

::: {.fragment .callout-note}
## Notación
Traducción a Lando–Zvonkin: $\rho=\alpha$. En Sage: `sigma`, `rho`.
:::

---

## Engrosamiento: de $(\sigma,\rho)$ a una superficie

Para cualquier par $(\sigma,\rho)$ como arriba, existe un procedimiento de **engrosar** el grafo para obtener una **superficie orientable con frontera** tal que:

::: {.incremental}
- la superficie se retrae fuertemente al grafo (deformación fuerte);
- el grafo queda **encajado** en la superficie;
- a partir del encaje se recuperan $\sigma$ y $\rho$.
:::

. . .

::: {.callout-tip}
## Intuición
Cada vértice se vuelve un "disco"; cada semiarista es una banda pegada al borde; $\sigma$ indica el orden de pegado alrededor del disco; $\rho$ pega lengüetas por pares.
:::

---

## Heffter–Edmonds: rotaciones $\leftrightarrow$ encajes celulares

::: {.callout-important}
## Teorema (Heffter–Edmonds)
Todo *sistema de rotación puro* para un grafo $G$ induce (hasta equivalencia por homeomorfismos que preservan orientación) un **encaje** de $G$ en una superficie orientable.

Recíprocamente, todo encaje de $G$ en una superficie orientable induce un único sistema de rotación puro para $G$.
:::

. . .

::: {style="text-align: center; margin-top: 2em; font-size: 0.9em; color: #64748b;"}
Se atribuye a Heffter (1891) y Edmonds (1960) en la literatura.
:::

---

## Mapas combinatorios: el modelo permutacional

Sea $D$ el conjunto de semiaristas. Entonces $|D|=2|E|$.

. . .

Del lado combinatorio trabajamos con:

::: {.incremental}
- $\sigma$: ciclos = vértices; orden cíclico alrededor del vértice (orientación).
- $\rho$: transposiciones = aristas; empareja semiaristas.
:::

. . .

::: {.fragment}
Lo que falta para reconstruir el encaje es identificar las **caras**.
Esto se obtiene con una tercera permutación sobre $D$.
:::

---

## Convención para leer caras

::: {.callout-note}
## Convención
Al recorrer una semiarista desde un vértice, colocamos su etiqueta en el **lado izquierdo** del trazo. Una semiarista es **incidente** a una cara si su etiqueta queda dentro de esa cara.
:::

. . .

Con esta convención, cada cara queda descrita por un ciclo de semiaristas en sentido antihorario.

. . .

::: {style="text-align: center; margin-top: 1em; font-size: 0.9em; color: #64748b;"}
(Esto es exactamente lo que usan los algoritmos de *face tracing*.)
:::

---

## Permutación de caras $\varphi$

La permutación de caras $\varphi$ se computa a partir de $\sigma$ y $\rho$:

$$
\varphi \;=\; \rho^{-1}\sigma^{-1}
$$

. . .

Como $\rho$ es una involución, $\rho^{-1}=\rho$, pero se escribe así porque en generalizaciones (hipermapas) la "permutación de aristas" puede no ser involución.

. . .

Forma equivalente:
$$
\sigma\,\rho\,\varphi \;=\; \mathrm{id}
$$

. . .

::: {.callout-tip}
## Interpretación
Los ciclos de $\varphi$ $\leftrightarrow$ caras del encaje celular.
:::

---

## Algoritmo de trazado de caras (face tracing) vía permutaciones

Para recorrer una cara en sentido positivo, desde una semiarista $d$ repetimos:
$$
d \longmapsto \varphi(d)=\rho^{-1}\sigma^{-1}(d)
$$

. . .

::: {.callout-note}
## Regla local (mentalmente útil)

- $\rho^{-1}$: cruzar la arista (cambiar a la semiarista "opuesta").
- $\sigma^{-1}$: tomar la semiarista "anterior" en el orden cíclico del vértice.
:::

. . .

Un ciclo cerrado de $\varphi$ da la frontera de una cara.
Repitiendo con semiaristas no usadas se obtienen todas las caras.

---

## De $[\sigma,\rho,\varphi]$ a una superficie: pegado de polígonos

::: {.callout-important}
## Construcción (polígonos $\to$ superficie)

1. A cada ciclo de $\varphi$ de longitud $m$, asociamos un $m$-gono orientado (con lados etiquetados por las semiaristas del ciclo).

2. Pegamos lados por pares según $\rho$, con orientaciones opuestas.

3. Los vértices quedan determinados por los ciclos de $\sigma$.
:::

. . .

El resultado es una superficie orientable y un encaje celular del grafo.

. . .

::: {style="text-align: center; margin-top: 1em; color: #1e88e5; font-weight: 600;"}
Con esto, $(\sigma,\rho)$ "contiene" el encaje completo.
:::

---

## Euler y género desde permutaciones

Si $V=\#\text{ciclos}(\sigma)$, $E=|D|/2$, $F=\#\text{ciclos}(\varphi)$, entonces

$$
\chi \;=\; V - E + F
$$

. . .

Para una superficie orientable cerrada:

$$
\chi = 2-2g \quad\Rightarrow\quad g = 1-\frac{\chi}{2}
$$

. . .

::: {.callout-note}
## Caso con frontera
En el caso "con frontera" (ribbon graph thickening), Sage reporta género y número de componentes de frontera.
:::

---

## Conexión con Sage: RibbonGraph($\sigma,\rho$) {.smaller}

Sage implementa **ribbon graphs** como datos $(\sigma,\rho)$ sobre semiaristas:

::: {.incremental}
- `sigma`: ciclos = orden cíclico en cada vértice.
- `rho`: producto de 2-ciclos = emparejamiento en aristas.
:::

. . .

::: {.fragment}
Lo útil para clase/investigación:

- `R.genus()`, `R.number_boundaries()`
- `R.boundary()` (caras/bordes etiquetados)
- contracciones/extrusiones: `contract_edge`, `extrude_edge`
- `R.homology_basis()` (base en $H_1$ del grafo)
:::

. . .

::: {.callout-tip}
## Ventaja
Esto te permite pasar de rotaciones a "geometría" sin dibujar la superficie.
:::

---

## Puente hacia el toro: del rectángulo identificado al dibujo

Para visualizar un encaje en el toro:

::: {.incremental}
- Modela el toro como un cuadrado con lados opuestos identificados.
- Traza el grafo dentro del cuadrado; cuando una arista cruza un borde, reaparece en el borde opuesto.
- El sistema de rotación fija el orden local en cada vértice, y el trazado de caras ($\varphi$) te dice qué polígonos pegas: eso determina el género.
:::

. . .

::: {.callout-important}
## Mensaje clave
El dibujo bonito en 3D es sólo una visualización; la información real está en $(\sigma,\rho)$.
:::

---

## Para investigación: direcciones inmediatas

Una vez dominado $(\sigma,\rho)$, puedes atacar:

::: {.incremental}
- **Género mínimo** y obstrucciones combinatorias.
- **Enumeración** de encajes celulares (órbitas por conjugación).
- **Invariantes**: polinomios tipo Tutte/Bollobás–Riordan (ribbon graphs).
- **Operaciones**: contracción, eliminación, dualidad (cuando aplique), reducción.
:::

. . .

::: {.callout-tip}
## Sage como laboratorio
Sage te sirve como laboratorio para experimentar y luego formalizar resultados.
:::

---

## Cierre {.smaller}

::: {.incremental}
- Un encaje celular orientable $\Longleftrightarrow$ un sistema de rotación puro.
- Combinatoriamente: semiaristas $D$, permutaciones $\sigma$ (vértices) y $\rho$ (aristas).
- Las caras se leen con $\varphi=\rho^{-1}\sigma^{-1}$.
- Con $(V,E,F)$ recuperamos $\chi$ y el género.
:::

. . .

::: {.callout-important style="margin-top: 2em;"}
## Siguiente paso
Ejemplos concretos (toro) y experimentos en Sage.
:::

. . .

::: {style="text-align: center; margin-top: 3em; font-size: 1.5em; color: #1e88e5; font-weight: 700;"}
¡Gracias!
:::
